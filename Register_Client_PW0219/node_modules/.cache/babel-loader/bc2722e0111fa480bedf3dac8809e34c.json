{"ast":null,"code":"var _jsxFileName = \"/home/apleitez/Documents/WEB/labofinal/Register_Client_PW0219/src/components/App.js\";\nimport React from \"react\";\nimport RegisterForm from './RegisterForm';\nimport RegisterTable from './RegisterTable';\nimport Api from '../utils/apiURLBase';\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      student_list: [],\n      id_counter: 0\n    };\n  }\n\n  componentDidMount() {\n    let options = {\n      headers: {\n        Accept: 'application/json'\n      }\n    };\n    fetch(\"\".concat(Api.baseURL, \"/register\"), options).then(res => {\n      return res.json();\n    }).then(data => {\n      console.log(data);\n      this.setState({\n        student_list: data.students\n      });\n    }).catch(err => console.log(\"Ocurrio un error en la conexion\"));\n  }\n\n  handleSubmit(student) {\n    student.datetime = new Date();\n    let options = {\n      method: \"POST\",\n      headers: {\n        \"Content-type\": \"application/json\",\n        \"Accept\": \"application/json\"\n      },\n      body: JSON.stringify(student)\n    };\n    fetch(\"\".concat(Api.baseURL, \"/register/create\"), options).then(res => {\n      return res.json();\n    }).then(data => {\n      console.log(data);\n      let buffer_list = this.state.student_list.slice();\n      this.setState({\n        student_list: buffer_list.concat([data.student])\n      });\n    }).catch(err => console.log(\"Ocurrio un error en la conexion\"));\n  }\n\n  handleDelete(student) {\n    let index = this.state.student_list.find(value => {\n      return value._id === student._id;\n    });\n    let buffer_list = this.state.student_list.slice();\n    buffer_list.splice(index, 1);\n    this.setState({\n      student_list: buffer_list\n    });\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"container\",\n      style: {\n        \"marginTop\": 2 + \"em\",\n        \"marginBottom\": 2 + \"em\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }, React.createElement(RegisterForm, {\n      onSubmit: student => {\n        this.handleSubmit(student);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }), React.createElement(RegisterTable, {\n      list: this.state.student_list,\n      onDelete: student => this.handleDelete(student),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/home/apleitez/Documents/WEB/labofinal/Register_Client_PW0219/src/components/App.js"],"names":["React","RegisterForm","RegisterTable","Api","App","Component","constructor","props","state","student_list","id_counter","componentDidMount","options","headers","Accept","fetch","baseURL","then","res","json","data","console","log","setState","students","catch","err","handleSubmit","student","datetime","Date","method","body","JSON","stringify","buffer_list","slice","concat","handleDelete","index","find","value","_id","splice","render"],"mappings":"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","sourcesContent":["import React from \"react\"\nimport RegisterForm from './RegisterForm'\nimport RegisterTable from './RegisterTable'\nimport Api from '../utils/apiURLBase'\n\nclass App extends React.Component{\n    constructor(props){\n        super(props);\n        this.state = {\n            student_list:[],\n            id_counter:0\n        }\n    }\n\n    componentDidMount()\n    {\n        let options = {\n            headers:{\n                Accept: 'application/json'\n            }\n        }\n        fetch(`${Api.baseURL}/register`, options)\n        .then(res => {return res.json()})\n        .then(data =>{\n            console.log(data);\n            this.setState({\n                student_list: data.students\n            })\n        })\n        .catch(err => console.log(\"Ocurrio un error en la conexion\"))\n    }\n\n    handleSubmit(student){\n        student.datetime = new Date();\n\n        let options = {\n            method: \"POST\",\n            headers: {\n                \"Content-type\": \"application/json\",\n                \"Accept\": \"application/json\"\n            },\n            body: JSON.stringify(student)\n        }\n\n        fetch(`${Api.baseURL}/register/create`, options)\n        .then(res => {return res.json()})\n        .then(data =>{\n            console.log(data);\n            let buffer_list = this.state.student_list.slice();\n            this.setState({\n                student_list: buffer_list.concat([data.student])\n\n            })\n        })\n        .catch(err => console.log(\"Ocurrio un error en la conexion\"))\n    }\n\n    handleDelete(student){\n        let index = this.state.student_list.find(value=>{\n            return value._id === student._id;\n        })\n\n        let buffer_list = this.state.student_list.slice();\n        buffer_list.splice(index, 1);\n\n        this.setState({\n            student_list: buffer_list\n        });\n    }\n    \n    render(){\n        return (\n            <div className=\"container\" style={{\"marginTop\":2+\"em\", \"marginBottom\":2+\"em\"}}>\n                <RegisterForm \n                    onSubmit = {(student)=>{\n                        this.handleSubmit(student);\n                    }}\n                />\n                <RegisterTable \n                    list={this.state.student_list}\n                    onDelete={(student)=>this.handleDelete(student)}\n                    />\n            </div>\n        );\n    }\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}